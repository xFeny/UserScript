### 使用脚本前

建议先在浏览器上安装 [uBlock Origin](https://www.crxsoso.com/webstore/detail/cjpalhdlnbpafiamejdnhcphjbkeiagm) 或 [AdGuard](https://www.crxsoso.com/webstore/detail/bgnkhhnnamicmpeenaelnjfhikgbkllg) 扩展，可有效移除视频网站的视频广告。

#### 脚本菜单  

脚本菜单项：  
1. 开启/关闭倍速功能
2. 设置倍速步进  
3. 设置快进/快退秒数  
4. 设置数字零键快进秒数  
5. 开启/关闭自动网页全屏  
6. 开启/关闭 空格 ◀▶ 键控制  
![脚本菜单](./script_menu_command.png)  

### 快捷键

> `F` ：切换全屏  
> `P` ：切换网页全屏  
> `N` ：下一个视频  
> `D` ：弹幕开/关  
> `A` 或 `+` ：倍速 `+0.25`  
> `S` 或 `-` ：倍速 `-0.25 `  
> `shift` `+` / `-` ：当前倍速×÷2  
> `Z` ：恢复正常倍速   
> 数字 `0` ：快进30秒，便于跳过视频中的广告讲解  
> 数字 `1-9` ：`1-9` 倍速  
> 空格 ：暂停/播放  
> ▶ ：快进5秒   
> ◀ ：快退5秒  

### 关于自动网页全屏

如果不需要打开视频播放页自动网页全屏，可在脚本菜单中关闭。关闭后不会影响快捷键(P)切换。

### 关于自动恢复网页全屏

在开启了自动网页全屏状态下，如果退出了网页全屏且视频暂停，重新播放后默认会恢复为网页全屏。  
如果不希望这样的效果，可注释掉如下代码：

```js
App.webFullScreen(this);
```
### 关于自动退出网页全屏

脚本默认对B站和AcFun弹幕网，播放完自动退出全屏（番剧页不支持）。B站自动点击“取消连播”按钮。  

B站如果合集视频为最后一集、关闭了合集“自动连播”，也会自动退出网页全屏

如不需要该功能，可将脚本中下面注释的代码放开：

```js
// if (/[a-zA-z]+:\/\/[^\s]*/.test(href)) return;
```
### 关于 空格 ◀▶ 键控制

脚本默认为关闭状态，在脚本菜单中可开启，开启控制后，会覆盖播放器自带的操作。

开启控制后，可在脚本菜单设置快进/快退秒数。

### 关于倍速播放

本脚本的倍速设置默认只针对 `@match` 中存在的网站，<b style="color:red;">理论上</b>对所有含有 HTML5 `video` 的网页都可以倍速播放。

如果有需要的话可将脚本中的：

```js
// @note        *://*/*
```

改成：

```js
// @match        *://*/*
```

或只对某网站使用倍速控制，如**百度网盘**：

```js
// @include        *://pan.baidu.com/*
```

默认倍速提示时长5秒，觉得太久？

```js
// 修改为喜欢的
SHOW_TOAST_TIME: ONE_SECOND * 5
```

默认倍速提示处于视频的左下角，可选居中或右下角提示。

```js
// 修改为居中提示
SHOW_TOAST_POSITION: positions.center

// 修改为右下角提示
SHOW_TOAST_POSITION: positions.bottomRight
```
> 如果不需要倍速播放功能，可在脚本菜单中关闭

### 关于页面不可见时暂停播放

脚本实现了页面可见性监听，当视频播放标签页不可见时会暂停播放，可见时继续播放。

如不需要该功能的话，把下面的代码注释掉：

```js
this.setupVisibleListener();
```
### 网页全屏功能增强

本脚本配合[视频网页全屏（改）](https://greasyfork.org/zh-CN/scripts/495077-maximize-video-improve)使用，可以减少不必要的鼠标移动。  

[视频网页全屏（改）](https://greasyfork.org/zh-CN/scripts/495077-maximize-video-improve)需要鼠标移动到视频播放器上，出现了网页全屏按钮后，再按 快捷键 `Esc` 或 `网页全屏` 按钮 进行网页全屏。

而配合本脚本后，播放器加载完毕后直接按 快捷键(P) 网页全屏。

#### 前提

安装[视频网页全屏（改）](https://greasyfork.org/zh-CN/scripts/495077-maximize-video-improve)  脚本。

把本脚本内的：

```js
// @note        *://*/*
```
改成：

```js
// @match        *://*/*
```
或只针对某个网站使用，如 [咕咕番](https://www.gugu3.com)：

```js
// @include      *://www.gugu3.com/*
```

> **提示**  
> 
> 推荐使用匹配所有网站方式使用，只针对某个网站使用的话，如果网站视频是在跨域 `iframe` 中，还需要添加在框架的域名匹配。  
> 
> 例如[E站弹幕网](https://www.ezdmw.site/)，要按如下匹配才可以：  
> 
> ```
> // @include      *://www.ezdmw.site/Index/video/*
> // @include      *://player.ezdmw.com/danmuku/*
> ```

### 更新历史

- 2.6.3  
  1. 新增脚本菜单：开/关倍速功能。  

- 2.6.1  
  1. 键盘事件优化。  
  2. 移除 `alt` `+` 、`alt` `-` 、`*` 快捷键。  

- 2.6.0
  1. 修复倍速提示精度问题。
  2. 实验性扩展功能优化，提高准确性。
  3. 新增：脚本菜单设置开/关自动网页全屏、设置倍速步进、快进/快退时长。
  4. 新增：快进(▶ 或 `alt` `+`)、快退(◀ 或 `alt` `-`)、暂停/播放(空格)快捷键。
  5. 多视频页增加定时监测机制，不断检查当前当前播放的`video`，实时应用倍速到新的视频。  

- 2.5.1  
  1. 适配斗鱼视频（v.douyu.com）。

- 2.4.8  
  1. 新增：数字 `0` 快捷键，快进30秒。
  
- 2.4.6  
  1. 优化播放结束退出网页全屏的代码。

- 2.4.5  
  1. B站：优化视频播放可见性监听，已播放结束的视频不再播放。
  
- 2.4.4  
  1. fiX：B站嵌套直播间网页全屏导航栏不消失问题。
  
- 2.4.3  
  1. 自动关闭腾讯视频播放页的登录弹窗。
  2. 隐藏B站播放内的各类弹窗，如：一键三连、左下角的登录提示。
  3. 优化B站播放1分钟的登录弹窗。
  
- 2.4.0  
  1. 自动关闭B站未登录状态下观看视频1分钟时的登录弹窗。
  
- v 2.3.0  
  1. 新增`shift` `+` / `-` 快捷键，当前倍速×÷2，便于设置最高倍速。
  
- v 2.2.0
  1. 移除 `0` 快捷键。
  2. fix: B站直播可见性监听失效问题。

- v 2.1.0
  1. bug: 移除在`@match`中的地址鼠标悬停监听，该监听会影响腾讯视频的倍速播放。
  1. fix: **抖音网页版**为直播间时也会应用倍速问题。
  1. 新增对 [视频网页全屏（改）](https://greasyfork.org/zh-CN/scripts/495077-maximize-video-improve)  的实验性扩展。

- v 2.0.0
  1. 新增倍速播放功能。
  2. 新增页面可见性监听，当视频播放标签页不可见时会暂停播放，可见时继续播放。

- v 0.9.9
  1. 解决B站直播不支持`全屏切换`、`关闭弹幕`快捷键。

- v 0.9.7
  1. 新增`全屏(F)`、`网页全屏(P)`、`下一个视频(N)`、`弹幕开关(D)`快捷键。